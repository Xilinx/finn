
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>finn.transformation package &#8212; FINN  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="finn-transformation-package">
<h1>finn.transformation package<a class="headerlink" href="#finn-transformation-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="finn.transformation.fpgadataflow.html">finn.transformation.fpgadataflow package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.cleanup">finn.transformation.fpgadataflow.cleanup module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.codegen_ipgen">finn.transformation.fpgadataflow.codegen_ipgen module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.codegen_ipstitch">finn.transformation.fpgadataflow.codegen_ipstitch module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.codegen_npysim">finn.transformation.fpgadataflow.codegen_npysim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.compile">finn.transformation.fpgadataflow.compile module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.convert_to_hls_layers">finn.transformation.fpgadataflow.convert_to_hls_layers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.create_dataflow_partition">finn.transformation.fpgadataflow.create_dataflow_partition module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.hlssynth_ipgen">finn.transformation.fpgadataflow.hlssynth_ipgen module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.insert_tlastmarker">finn.transformation.fpgadataflow.insert_tlastmarker module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.make_deployment">finn.transformation.fpgadataflow.make_deployment module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.make_pynq_driver">finn.transformation.fpgadataflow.make_pynq_driver module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.make_pynq_proj">finn.transformation.fpgadataflow.make_pynq_proj module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.set_sim_mode">finn.transformation.fpgadataflow.set_sim_mode module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.synth_pynq_proj">finn.transformation.fpgadataflow.synth_pynq_proj module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow.templates">finn.transformation.fpgadataflow.templates module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.fpgadataflow.html#module-finn.transformation.fpgadataflow">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="finn.transformation.streamline.html">finn.transformation.streamline package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline.absorb">finn.transformation.streamline.absorb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline.collapse_repeated">finn.transformation.streamline.collapse_repeated module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline.reorder">finn.transformation.streamline.reorder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline.round_thresholds">finn.transformation.streamline.round_thresholds module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline.sign_to_thres">finn.transformation.streamline.sign_to_thres module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finn.transformation.streamline.html#module-finn.transformation.streamline">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-finn.transformation.batchnorm_to_affine">
<span id="finn-transformation-batchnorm-to-affine-module"></span><h2>finn.transformation.batchnorm_to_affine module<a class="headerlink" href="#module-finn.transformation.batchnorm_to_affine" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.batchnorm_to_affine.BatchNormToAffine">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.batchnorm_to_affine.</code><code class="sig-name descname">BatchNormToAffine</code><a class="headerlink" href="#finn.transformation.batchnorm_to_affine.BatchNormToAffine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Replaces any test-time BatchNorm layers with Mul-Add layers.</p>
<dl class="method">
<dt id="finn.transformation.batchnorm_to_affine.BatchNormToAffine.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.batchnorm_to_affine.BatchNormToAffine.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation.bipolar_to_xnor">
<span id="finn-transformation-bipolar-to-xnor-module"></span><h2>finn.transformation.bipolar_to_xnor module<a class="headerlink" href="#module-finn.transformation.bipolar_to_xnor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.bipolar_to_xnor.ConvertBipolarMatMulToXnorPopcount">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.bipolar_to_xnor.</code><code class="sig-name descname">ConvertBipolarMatMulToXnorPopcount</code><a class="headerlink" href="#finn.transformation.bipolar_to_xnor.ConvertBipolarMatMulToXnorPopcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Convert MatMul nodes with all-bipolar inputs to XnorPopcountMatMul
and associated result correction.</p>
<dl class="method">
<dt id="finn.transformation.bipolar_to_xnor.ConvertBipolarMatMulToXnorPopcount.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.bipolar_to_xnor.ConvertBipolarMatMulToXnorPopcount.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation.fold_constants">
<span id="finn-transformation-fold-constants-module"></span><h2>finn.transformation.fold_constants module<a class="headerlink" href="#module-finn.transformation.fold_constants" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.fold_constants.FoldConstants">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.fold_constants.</code><code class="sig-name descname">FoldConstants</code><a class="headerlink" href="#finn.transformation.fold_constants.FoldConstants" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Replace the output of a node with const-only inputs with a precomputed
result.</p>
<dl class="method">
<dt id="finn.transformation.fold_constants.FoldConstants.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.fold_constants.FoldConstants.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation.general">
<span id="finn-transformation-general-module"></span><h2>finn.transformation.general module<a class="headerlink" href="#module-finn.transformation.general" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.general.ConvertSubToAdd">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.general.</code><code class="sig-name descname">ConvertSubToAdd</code><a class="headerlink" href="#finn.transformation.general.ConvertSubToAdd" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Convert sub nodes to add nodes of appropriate sign.</p>
<dl class="method">
<dt id="finn.transformation.general.ConvertSubToAdd.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.general.ConvertSubToAdd.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="finn.transformation.general.GiveRandomTensorNames">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.general.</code><code class="sig-name descname">GiveRandomTensorNames</code><a class="headerlink" href="#finn.transformation.general.GiveRandomTensorNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Give random tensor names to all tensors.</p>
<dl class="method">
<dt id="finn.transformation.general.GiveRandomTensorNames.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.general.GiveRandomTensorNames.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="finn.transformation.general.GiveReadableTensorNames">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.general.</code><code class="sig-name descname">GiveReadableTensorNames</code><a class="headerlink" href="#finn.transformation.general.GiveReadableTensorNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Give more human-readable names to all internal tensors. It’s recommended
to apply give_unique_node_names prior to this transform.</p>
<dl class="method">
<dt id="finn.transformation.general.GiveReadableTensorNames.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.general.GiveReadableTensorNames.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="finn.transformation.general.GiveUniqueNodeNames">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.general.</code><code class="sig-name descname">GiveUniqueNodeNames</code><a class="headerlink" href="#finn.transformation.general.GiveUniqueNodeNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Give unique names to each node in the graph using enumeration.</p>
<dl class="method">
<dt id="finn.transformation.general.GiveUniqueNodeNames.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.general.GiveUniqueNodeNames.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation.infer_datatypes">
<span id="finn-transformation-infer-datatypes-module"></span><h2>finn.transformation.infer_datatypes module<a class="headerlink" href="#module-finn.transformation.infer_datatypes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.infer_datatypes.InferDataTypes">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.infer_datatypes.</code><code class="sig-name descname">InferDataTypes</code><a class="headerlink" href="#finn.transformation.infer_datatypes.InferDataTypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Infer FINN DataType info for all intermediate/output tensors based on
inputs and node type.</p>
<dl class="method">
<dt id="finn.transformation.infer_datatypes.InferDataTypes.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.infer_datatypes.InferDataTypes.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation.infer_shapes">
<span id="finn-transformation-infer-shapes-module"></span><h2>finn.transformation.infer_shapes module<a class="headerlink" href="#module-finn.transformation.infer_shapes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="finn.transformation.infer_shapes.InferShapes">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.infer_shapes.</code><code class="sig-name descname">InferShapes</code><a class="headerlink" href="#finn.transformation.infer_shapes.InferShapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#finn.transformation.Transformation" title="finn.transformation.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">finn.transformation.Transformation</span></code></a></p>
<p>Ensure every tensor in the model has a specified shape (ValueInfo).</p>
<dl class="method">
<dt id="finn.transformation.infer_shapes.InferShapes.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.infer_shapes.InferShapes.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-finn.transformation">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-finn.transformation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="guide-to-writing-finn-transformations">
<h3>Guide to writing FINN transformations<a class="headerlink" href="#guide-to-writing-finn-transformations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Your transformation must inherit the Transformation abstract base class.</p></li>
<li><p>Your transformation’s apply function should take in a ModelWrapper, and return
a tuple with (transformed_model: ModelWrapper, model_was_changed: Bool)</p></li>
<li><p>The transformations are meant to be applied using the .transform function
in ModelWrapper. This makes a deep copy of the input model by default, so
you don’t have to.</p></li>
<li><p>model_was_changed indicates whether your transformation made any changes to
the model. If you know your transformation needs to be called only once and
repeated calls have no further effect, you can return False even if the model
was changed.</p></li>
<li><p>You MUST return model_was_changed=False at some point when your transformation
is called multiple times, otherwise apply_repeated() will loop infinitely.</p></li>
<li><p>If you cannot guarantee that the transformation will reach a fixed point,
you must declare this, return model_was_changed = False and let the user
manually re-apply the transform.</p></li>
</ul>
<dl class="class">
<dt id="finn.transformation.Transformation">
<em class="property">class </em><code class="sig-prename descclassname">finn.transformation.</code><code class="sig-name descname">Transformation</code><a class="headerlink" href="#finn.transformation.Transformation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<dl class="method">
<dt id="finn.transformation.Transformation.apply">
<em class="property">abstract </em><code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">model</em><span class="sig-paren">)</span><a class="headerlink" href="#finn.transformation.Transformation.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">FINN</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Y. Umuroglu, J. Petri-Koenig.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/finn.transformation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>